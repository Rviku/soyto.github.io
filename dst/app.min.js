/*
 * Soyto.github.io (0.2.1)
 * 				DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
 * 					Version 2, December 2004
 * Copyright (C) 2004 Sam Hocevar <sam@hocevar.net>
 * Everyone is permitted to copy and distribute verbatim or modified
 * copies of this license document, and changing it is allowed as long
 * as the name is changed.
 * 
 * 				DO WHAT THE FUCK YOU WANT TO PUBLIC LICENSE
 * 		TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
 * 
 * 0. You just DO WHAT THE FUCK YOU WANT TO.
 */
window.storedDates=["07-08-2015","07-09-2015","07-10-2015","07-11-2015","07-12-2015","07-14-2015","07-15-2015","07-16-2015","07-17-2015","07-18-2015","07-19-2015","07-20-2015"],function(a){"use strict";function b(a){var b={templateUrl:"/app/templates/index.html",controller:"mainApp.index.controller"};a.when("/",b);var c={templateUrl:"/app/templates/ranking.html",controller:"mainApp.ranking.list.controller",resolve:{serverData:["helperService","storedDataService","$route",function(a,b,c){return a.$q.likeNormal(b.getLastFromServer(c.current.params.serverName))}]}};a.when("/ranking/:serverName",c);var d={templateUrl:"/app/templates/ranking.html",controller:"mainApp.ranking.list.controller",resolve:{serverData:["helperService","storedDataService","$route",function(a,b,c){return a.$q.likeNormal(b.getFromServer(c.current.params.date,c.current.params.serverName))}]}};a.when("/ranking/:serverName/:date",d);var e={templateUrl:"/app/templates/characterInfo.html",controller:"mainApp.characterInfo.controller",resolve:{characterInfo:["helperService","storedDataService","$route",function(a,b,c){return a.$q.likeNormal(b.getCharacterInfo(c.current.params.serverName,c.current.params.characterID))}]}};a.when("/character/:serverName/:characterID",e)}a.module("mainApp",["ngRoute"]),a.module("mainApp").config(["$routeProvider",b])}(angular),function(a){"use strict";function b(a,b,d){a._name=c;var e=function(a,b){return a.date>b.date?-1:1};a.serverName=d.serverName,a.character=d.data,a.character.raceName=1==a.character.raceID?"Asmodian":"Elyo",a.character.characterClass=b.getCharacterClass(d.data.characterClassID),a.character.soldierRank=b.getCharacterRank(d.data.soldierRankID),a.character.names=a.character.names.sort(e),a.character.status=a.character.status.sort(e),a.character.status.forEach(function(a){a.soldierRank=b.getCharacterRank(a.soldierRankID)})}var c="mainApp.characterInfo.controller";a.module("mainApp").controller(c,["$scope","storedDataService","characterInfo",b])}(angular),function(a){"use strict";function b(a,b){a._name=c,a.servers=b.serversList}var c="mainApp.index.controller";a.module("mainApp").controller(c,["$scope","storedDataService",b])}(angular),function(a){"use strict";function b(a,b,d,e,f){function g(){a.serverData=f,a.storedDates=e.storedDates,a.servers=e.serversList,a.classes=e.characterClassIds.where(function(a){return a.id}),a.searchDate=f.date,a.currentServer=e.serversList.first(function(a){return a.name==f.serverName}),a.elyosData=f.data.elyos.select(h),a.asmodianData=f.data.asmodians.select(h),a.textSearch="",a.selectedClass="",f.data.elyos.length>f.data.asmodians.length?f.data.elyos.forEach(function(a){var b=f.data.asmodians.first(function(b){return b.position==a.position}),c=h(a),d=h(b);j.push({position:a.position,rankName:a.soldierRank,elyo:c,asmodian:d})}):f.data.elyos.length<f.data.asmodians.length?f.data.asmodians.forEach(function(a){var b=f.data.elyos.first(function(b){return b.position==a.position}),c=h(b),d=h(a);j.push({position:a.position,rankName:a.soldierRank,elyo:c,asmodian:d})}):f.data.elyos.length==f.data.asmodians.length&&f.data.elyos.forEach(function(a,b){var c=f.data.asmodians.first(function(b){return b.position==a.position}),d=h(a),e=h(c);j.push({position:a.position,rankName:a.soldierRank,elyo:d,asmodian:e})}),a.versusData=j,a.$watch("searchDate",function(a){a!=f.date&&b.path("/ranking/"+f.serverName+"/"+a)}),a.$watch("currentServer",function(a){a.name!=f.serverName&&b.path("/ranking/"+a.name+"/"+f.date)}),a.$watch("selectedClass",function(b){i(b,a.textSearch)}),a.$watch("textSearch",function(b){i(a.selectedClass,b)})}function h(a){return a?(a.characterClass=e.getCharacterClass(a.characterClassID),a.soldierRank=e.getCharacterRank(a.soldierRankID),a):{}}function i(b,c){k&&d.cancel(k),k=d(function(){var d=function(a){return b&&c?a.characterClassID==b.id&&a.characterName.toLowerCase().indexOf(c)>=0:b?a.characterClassID==b.id:a.characterName.toLowerCase().indexOf(c)>=0},e=function(a){return b&&c?a.elyo&&a.elyo.characterName&&a.elyo.characterName.toLowerCase().indexOf(c.toLowerCase())>=0&&a.elyo.characterClassID==b.id||a.asmodian&&a.asmodian.characterName&&a.asmodian.characterName.toLowerCase().indexOf(c.toLowerCase())>=0&&a.asmodian.characterClassID==b.id:b?a.elyo&&a.elyo.characterName&&a.elyo.characterClassID==b.id||a.asmodian&&a.asmodian.characterClassID==b.id:a.elyo&&a.elyo.characterName&&a.elyo.characterName.toLowerCase().indexOf(c.toLowerCase())>=0||a.asmodian&&a.asmodian.characterName&&a.asmodian.characterName.toLowerCase().indexOf(c.toLowerCase())>=0};b||c?(a.elyosData=f.data.elyos.where(d).select(h),a.asmodianData=f.data.asmodians.where(d).select(h),a.versusData=j.where(e)):(a.elyosData=f.data.elyos.select(h),a.asmodianData=f.data.asmodians.select(h),a.versusData=j)},500)}a._name=c;var j=[],k=null;g()}var c="mainApp.ranking.list.controller";a.module("mainApp").controller(c,["$scope","$location","$timeout","storedDataService","serverData",b])}(angular),function(a){"use strict";function b(a,b,d){a._name=c,a.$on("$routeChangeSuccess",function(a){b.ga("send","pageview",{page:d.url()})})}var c="mainApp.main.controller";a.module("mainApp").controller(c,["$rootScope","$window","$location",b])}(angular),function(a){"use strict";function b(a){var b=this;b.$q={},b.$q.fcall=function(b){var c=a.defer();return b?c.resolve(b()):c.resolve(),c.promise},b.$q.pfcall=function(b){var c=a.defer();return b?c.resolve(b()):c.resolve(),c},b.$q.likeHttp=function(c){if(c.promise)return c.promise.success=function(a){return c.promise.then(a),c.promise},c.promise.error=function(a){return c.promise["catch"](a),c.promise},c;if(c.then){var d=b.$q.likeHttp(a.defer());return c.then(d.resolve),c["catch"](d["catch"]),d.promise}},b.$q.likeNormal=function(b){var c=a.defer();return b.success(c.resolve).error(c.reject),c.promise},b.$q["new"]=function(){return a.defer()},b.$q.all=function(b){return a.all(b)}}a.module("mainApp").service("helperService",["$q",b])}(angular),function(a){"use strict";function b(a,b,c){function d(){return g.storedDates[g.storedDates.length-1]}var e=[],f=[],g=this;g.serversList=[{id:47,name:"Alquima"},{id:46,name:"Anuhart"},{id:39,name:"Balder"},{id:49,name:"Barus"},{id:45,name:"Calindi"},{id:48,name:"Curatus"},{id:36,name:"Kromede"},{id:44,name:"Nexus"},{id:34,name:"Perento"},{id:31,name:"Spatalos"},{id:42,name:"Suthran"},{id:32,name:"Telemachus"},{id:37,name:"Thor"},{id:40,name:"Urtem"},{id:43,name:"Vehalla"},{id:51,name:"Zubaba"}],g.storedDates=b.storedDates,g.characterSoldierRankIds=[{id:0,name:"Unknown"},{id:1,name:"Unknown"},{id:2,name:"Unknown"},{id:3,name:"Unknown"},{id:4,name:"Unknown"},{id:5,name:"Unknown"},{id:6,name:"Unknown"},{id:6,name:"Unknown"},{id:7,name:"Unknown"},{id:9,name:"Unknown"},{id:10,name:"Army 1-Star Officer"},{id:11,name:"Army 2-Star Officer"},{id:12,name:"Army 3-Star Officer"},{id:13,name:"Army 4-Star Officer"},{id:14,name:"Army 5-Star Officer"},{id:15,name:"General"},{id:16,name:"Great general"},{id:17,name:"Commander"},{id:18,name:"Governor"}],g.characterClassIds=[{},{id:1,name:"Gladiator",icon:"img/gladiator.jpg"},{id:2,name:"Templar",icon:"img/templar.jpg"},{},{id:4,name:"Assasin",icon:"img/assassin.jpg"},{id:5,name:"Ranger",icon:"img/ranger.jpg"},{},{id:7,name:"Sorcerer",icon:"img/sorc.jpg"},{id:8,name:"Spiritmaster",icon:"img/sm.jpg"},{},{id:10,name:"Cleric",icon:"img/cleric.jpg"},{id:11,name:"Chanter",icon:"img/chanter.jpg"},{},{id:13,name:"Aethertech",icon:"img/gladiator.jpg"},{id:14,name:"Gunner",icon:"img/gunner.png"},{},{id:16,name:"Bard",icon:"img/barde.png"}],g.getCharacterRank=function(a){return g.characterSoldierRankIds[a]},g.getCharacterClass=function(a){return g.characterClassIds[a]},g.getFromServer=function(b,d){var f="data/"+b+"/"+d+".json",g=c.$q["new"](),h=e.first(function(a){return a.serverName==d&&a.date==b});if(h)g.resolve(h);else{var i=a({url:f,method:"GET"});i.success(function(a){var c={serverName:d,date:b,data:a};e.push(c),g.resolve(c)}),i.error(g.reject)}return c.$q.likeHttp(g.promise)},g.getLastFromServer=function(a){return g.getFromServer(d(),a)},g.getCharacterInfo=function(b,d){var g="data/Characters/"+b+"/"+d+".json",h=c.$q["new"](),i=f.first(function(a){return a.serverName==b&&a.characterID==d});if(i)h.resolve(i);else{var j=a({url:g,method:"GET"});j.success(function(a){var c={serverName:b,characterID:d,data:a};e.push(c),h.resolve(c)}),j.error(h.reject)}return c.$q.likeHttp(h.promise)}}a.module("mainApp").service("storedDataService",["$http","$window","helperService",b])}(angular);